<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Rename values in a vector based on a wordlist — clean_spelling • linelist</title>

<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script>

<!-- sticky kit -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>



<meta property="og:title" content="Rename values in a vector based on a wordlist — clean_spelling" />

<meta property="og:description" content="This function provides an interface for forcats::fct_recode(),
forcats::fct_explicit_na(), and forcats::fct_relevel() in such a way that
a data wordlist can be imported from a data frame." />
<meta name="twitter:card" content="summary" />



<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">linelist</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.0.33.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/overview.html">linelist: package overview</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/reconhub/linelist">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Rename values in a vector based on a wordlist</h1>
    <small class="dont-index">Source: <a href='https://github.com/reconhub/linelist/blob/master/R/clean_spelling.R'><code>R/clean_spelling.R</code></a></small>
    <div class="hidden name"><code>clean_spelling.Rd</code></div>
    </div>

    <div class="ref-description">
    
    <p>This function provides an interface for <code><a href='https://forcats.tidyverse.org/reference/fct_recode.html'>forcats::fct_recode()</a></code>,
<code><a href='https://forcats.tidyverse.org/reference/fct_explicit_na.html'>forcats::fct_explicit_na()</a></code>, and <code><a href='https://forcats.tidyverse.org/reference/fct_relevel.html'>forcats::fct_relevel()</a></code> in such a way that
a data wordlist can be imported from a data frame.</p>
    
    </div>

    <pre class="usage"><span class='fu'>clean_spelling</span>(<span class='kw'>x</span> <span class='kw'>=</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/character'>character</a></span>(), <span class='kw'>wordlist</span> <span class='kw'>=</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/data.frame'>data.frame</a></span>(),
  <span class='kw'>quiet</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>, <span class='kw'>warn_default</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>x</th>
      <td><p>a character or factor vector</p></td>
    </tr>
    <tr>
      <th>wordlist</th>
      <td><p>a two-column matrix or data frame defining mis-spelled words
in the first column (keys) and replacements (values) in the second column.
There are keywords that can be appended to the first column for addressing
default values and missing data.</p></td>
    </tr>
    <tr>
      <th>quiet</th>
      <td><p>a <code>logical</code> indicating if warnings should be issued if no
replacement is made; if <code>FALSE</code>, these warnings will be disabled</p></td>
    </tr>
    <tr>
      <th>warn_default</th>
      <td><p>a <code>logical</code>. When a <code>.default</code> keyword is set and
<code>warn_default = TRUE</code>, a warning will be issued listing the variables
that were changed to the default value. This can be used to update your
wordlist.</p></td>
    </tr>
    </table>
    
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>a vector of the same type as <code>x</code> with mis-spelled labels cleaned.
Note that factors will be arranged by the order presented in the data
wordlist; other levels will appear afterwards.</p>
    
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <h3>Keys (first column)</h3>
    The first column of the wordlist will contain the keys that you want to
match in your current data set. These are expected to match exactly with
the exception of two reserved keywords that both start with a full stop:
<ul>
<li><p><code>.missing</code>: replaces any missing values (see NOTE)</p></li>
<li><p><code>.default</code>: replaces <strong>ALL</strong> values that are not defined in the wordlist
and are not missing.</p></li>
</ul>
    <h3>Values (second column)</h3>
    The values will replace their respective keys exactly as they are presented.
    There is currently one recognised keyword that can be placed in the second
column of your wordlist:
<ul>
<li><p><code>.na</code>: Replace keys with missing data. When used in combination with the
<code>.missing</code> keyword (in column 1), it can allow you to differentiate
between explicit and implicit missing data.</p></li>
</ul>
    
    <h2 class="hasAnchor" id="note"><a class="anchor" href="#note"></a>Note</h2>

    <p>If there are any missing values in the first column (keys), then they
are automatically converted to the character "NA" with a warning. If you want
to target missing data with your wordlist, use the <code>.missing</code> keyword.</p>
    
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p><code><a href='clean_variable_spelling.html'>clean_variable_spelling()</a></code> for an implementation that acts across
multiple variables in a data frame.</p></div>
    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'>
<span class='no'>corrections</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/data.frame'>data.frame</a></span>(
  <span class='kw'>bad</span> <span class='kw'>=</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/c'>c</a></span>(<span class='st'>"foubar"</span>, <span class='st'>"foobr"</span>, <span class='st'>"fubar"</span>, <span class='st'>"unknown"</span>, <span class='st'>".missing"</span>),
  <span class='kw'>good</span> <span class='kw'>=</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/c'>c</a></span>(<span class='st'>"foobar"</span>, <span class='st'>"foobar"</span>, <span class='st'>"foobar"</span>, <span class='st'>".na"</span>, <span class='st'>"missing"</span>),
  <span class='kw'>stringsAsFactors</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>
)
<span class='no'>corrections</span></div><div class='output co'>#&gt;        bad    good
#&gt; 1   foubar  foobar
#&gt; 2    foobr  foobar
#&gt; 3    fubar  foobar
#&gt; 4  unknown     .na
#&gt; 5 .missing missing</div><div class='input'>
<span class='co'># create some fake data</span>
<span class='no'>my_data</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/c'>c</a></span>(<span class='no'>letters</span>[<span class='fl'>1</span>:<span class='fl'>5</span>], <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/sample'>sample</a></span>(<span class='no'>corrections</span>$<span class='no'>bad</span>[-<span class='fl'>5</span>], <span class='fl'>10</span>, <span class='kw'>replace</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>))
<span class='no'>my_data</span>[<span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/sample'>sample</a></span>(<span class='fl'>6</span>:<span class='fl'>15</span>, <span class='fl'>2</span>)] <span class='kw'>&lt;-</span> <span class='fl'>NA</span>  <span class='co'># with missing elements</span>

<span class='fu'>clean_spelling</span>(<span class='no'>my_data</span>, <span class='no'>corrections</span>)</div><div class='output co'>#&gt;  [1] "a"       "b"       "c"       "d"       "e"       "missing" "foobar" 
#&gt;  [8] "foobar"  NA        "foobar"  "foobar"  "foobar"  "missing" "foobar" 
#&gt; [15] "foobar" </div><div class='input'>
<span class='co'># You can also set a default value</span>
<span class='no'>corrections_with_default</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/cbind'>rbind</a></span>(<span class='no'>corrections</span>, <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/c'>c</a></span>(<span class='kw'>bad</span> <span class='kw'>=</span> <span class='st'>".default"</span>, <span class='kw'>good</span> <span class='kw'>=</span> <span class='st'>"unknown"</span>))
<span class='no'>corrections_with_default</span></div><div class='output co'>#&gt;        bad    good
#&gt; 1   foubar  foobar
#&gt; 2    foobr  foobar
#&gt; 3    fubar  foobar
#&gt; 4  unknown     .na
#&gt; 5 .missing missing
#&gt; 6 .default unknown</div><div class='input'>
<span class='co'># a warning will be issued about the data that were converted</span>
<span class='fu'>clean_spelling</span>(<span class='no'>my_data</span>, <span class='no'>corrections_with_default</span>)</div><div class='output co'>#&gt; <span class='warning'>Warning: 'a', 'b', 'c', 'd', 'e' were changed to the default value ('unknown')</span></div><div class='output co'>#&gt;  [1] "unknown" "unknown" "unknown" "unknown" "unknown" "missing" "foobar" 
#&gt;  [8] "foobar"  NA        "foobar"  "foobar"  "foobar"  "missing" "foobar" 
#&gt; [15] "foobar" </div><div class='input'>
<span class='co'># use the warn_default = FALSE, if you are absolutely sure you don't want it.</span>
<span class='fu'>clean_spelling</span>(<span class='no'>my_data</span>, <span class='no'>corrections_with_default</span>, <span class='kw'>warn_default</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>)</div><div class='output co'>#&gt;  [1] "unknown" "unknown" "unknown" "unknown" "unknown" "missing" "foobar" 
#&gt;  [8] "foobar"  NA        "foobar"  "foobar"  "foobar"  "missing" "foobar" 
#&gt; [15] "foobar" </div><div class='input'>
<span class='co'># The function will give you a warning if the wordlist does not</span>
<span class='co'># match the data</span>
<span class='fu'>clean_spelling</span>(<span class='no'>letters</span>, <span class='no'>corrections</span>)</div><div class='output co'>#&gt; <span class='warning'>Warning: None of the variables in letters were found in corrections. Did you use the correct wordlist?</span></div><div class='output co'>#&gt;  [1] "a" "b" "c" "d" "e" "f" "g" "h" "i" "j" "k" "l" "m" "n" "o" "p" "q" "r" "s"
#&gt; [20] "t" "u" "v" "w" "x" "y" "z"</div><div class='input'>
<span class='co'># The can be used for translating survey output</span>

<span class='no'>words</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/data.frame'>data.frame</a></span>(
  <span class='kw'>option_code</span> <span class='kw'>=</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/c'>c</a></span>(<span class='st'>"Y"</span>, <span class='st'>"N"</span>, <span class='st'>"U"</span>, <span class='st'>".missing"</span>),
  <span class='kw'>option_name</span> <span class='kw'>=</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/c'>c</a></span>(<span class='st'>"Yes"</span>, <span class='st'>"No"</span>, <span class='st'>".na"</span>, <span class='st'>"Missing"</span>),
  <span class='kw'>stringsAsFactors</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>
)
<span class='fu'>clean_spelling</span>(<span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/c'>c</a></span>(<span class='st'>"Y"</span>, <span class='st'>"Y"</span>, <span class='fl'>NA</span>, <span class='st'>"N"</span>, <span class='st'>"U"</span>, <span class='st'>"U"</span>, <span class='st'>"N"</span>), <span class='no'>words</span>)</div><div class='output co'>#&gt; [1] "Yes"     "Yes"     "Missing" "No"      NA        NA        "No"     </div><div class='input'>
</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#value">Value</a></li>

      <li><a href="#details">Details</a></li>

      <li><a href="#note">Note</a></li>

      <li><a href="#see-also">See also</a></li>
      
      <li><a href="#examples">Examples</a></li>
    </ul>

    <h2>Author</h2>
    <p>Zhian N. Kamvar</p>
  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by Thibaut Jombart, Zhian N. Kamvar.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.3.0.</p>
</div>
      </footer>
   </div>

  

  </body>
</html>


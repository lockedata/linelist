<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Handle dates data — clean_dates • linelist</title>

<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script>

<!-- sticky kit -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>



<meta property="og:title" content="Handle dates data — clean_dates" />

<meta property="og:description" content="This function detects variables of data.frame which are effectively
representing dates, and converts them to Date objects. When variables are
character strings or factors, the function will try to convert dates with
various pre-defined formats (see details). For each variable, the most
common date format is automatically detected, and dates not following it are
set to NA (i.e. missing). It uses a tolerance threshold for the amount of
entries which cannot be converted to date (error_tolerance). By default,
tolerance is set to 0.1, meaning 10
for a given variable. If there are more errors, this variable is assumed not
to be a date, and left untouched." />
<meta name="twitter:card" content="summary" />



<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">linelist</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.0.35.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/overview.html">linelist: package overview</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/reconhub/linelist">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Handle dates data</h1>
    <small class="dont-index">Source: <a href='https://github.com/reconhub/linelist/blob/master/R/clean_dates.R'><code>R/clean_dates.R</code></a></small>
    <div class="hidden name"><code>clean_dates.Rd</code></div>
    </div>

    <div class="ref-description">
    
    <p>This function detects variables of <code>data.frame</code> which are effectively
representing dates, and converts them to <code>Date</code> objects. When variables are
character strings or factors, the function will try to convert dates with
various pre-defined formats (see <em>details</em>). For each variable, the most
common date format is automatically detected, and dates not following it are
set to <code>NA</code> (i.e. missing). It uses a tolerance threshold for the amount of
entries which cannot be converted to date (<code>error_tolerance</code>). By default,
tolerance is set to <code>0.1</code>, meaning 10<!-- % of errors in dates entry is allowed -->
for a given variable. If there are more errors, this variable is assumed not
to be a date, and left untouched.</p>
    
    </div>

    <pre class="usage"><span class='fu'>clean_dates</span>(<span class='no'>x</span>, <span class='kw'>force_Date</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>, <span class='kw'>guess_dates</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>,
  <span class='kw'>error_tolerance</span> <span class='kw'>=</span> <span class='fl'>0.5</span>, <span class='no'>...</span>, <span class='kw'>classes</span> <span class='kw'>=</span> <span class='kw'>NULL</span>)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>x</th>
      <td><p>a <code>data.frame</code></p></td>
    </tr>
    <tr>
      <th>force_Date</th>
      <td><p>a <code>logical</code> or <code>integer</code> vector indicating the columns .
If <code>logical</code>, indicating if <code>POSIXct</code> and <code>POSIXlt</code> objects should be
converted to <code>Date</code> objects; defaults to <code>TRUE</code>; you should use this if your
dates are only precise to the day (i.e. no time information within days).</p></td>
    </tr>
    <tr>
      <th>guess_dates</th>
      <td><p>a <code>logical</code> or <code>integer</code> vector indicating which columns
should be guessed , assuming these columns store character strings or
<code>factors</code>; this feature is experimental; see <code><a href='guess_dates.html'>guess_dates()</a></code> for more
information.</p></td>
    </tr>
    <tr>
      <th>error_tolerance</th>
      <td><p>a number between 0 and 1 indicating the proportion of
entries which cannot be identified as dates to be tolerated; if this
proportion is exceeded, the original vector is returned, and a message is
issued; defaults to 0.1 (10 percent)</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>further arguments passed on to <code><a href='guess_dates.html'>guess_dates()</a></code></p></td>
    </tr>
    <tr>
      <th>classes</th>
      <td><p>a vector of class definitions for each of the columns. If this
is not provided, the classes will be read from the columns themselves.
Practically, this is used in <code><a href='clean_data.html'>clean_data()</a></code> to mark columns as protected.</p></td>
    </tr>
    </table>
    
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>A <code>data.frame</code> with standardised dates.</p>
    
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p><code><a href='guess_dates.html'>guess_dates()</a></code> to extract dates from a messy input vector</p></div>
    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'>
<span class='co'>## make toy data</span>
<span class='no'>onsets</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/as.POSIXlt'>as.POSIXct</a></span>(<span class='st'>"2018-01-01"</span>, <span class='kw'>tz</span> <span class='kw'>=</span> <span class='st'>"UTC"</span>)
<span class='no'>onsets</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/seq'>seq</a></span>(<span class='no'>onsets</span>, <span class='kw'>by</span> <span class='kw'>=</span> <span class='st'>"1 day"</span>, <span class='kw'>length.out</span> <span class='kw'>=</span> <span class='fl'>10</span>)
<span class='no'>onsets</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/sample'>sample</a></span>(<span class='no'>onsets</span>, <span class='fl'>20</span>, <span class='kw'>replace</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)
<span class='no'>onsets2</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/format'>format</a></span>(<span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/as.Date'>as.Date</a></span>(<span class='no'>onsets</span>), <span class='st'>"%d/%m/%Y"</span>)
<span class='no'>onsets3</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/format'>format</a></span>(<span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/as.Date'>as.Date</a></span>(<span class='no'>onsets</span>), <span class='st'>"%d %m %Y"</span>)
<span class='no'>outcomes</span> <span class='kw'>&lt;-</span> <span class='no'>onsets</span> + <span class='fl'>1e7</span>
<span class='no'>admissions</span> <span class='kw'>&lt;-</span> <span class='no'>onsets</span> + <span class='fl'>86400</span> + <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/sample'>sample</a></span>(<span class='fl'>86400</span>, <span class='fl'>20</span>)
<span class='no'>admissions</span>[<span class='fl'>1</span>:<span class='fl'>5</span>] <span class='kw'>&lt;-</span> <span class='fl'>NA</span>
<span class='no'>discharges</span> <span class='kw'>&lt;-</span> <span class='no'>admissions</span> + (<span class='fl'>86400</span> * <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/sample'>sample</a></span>(<span class='fl'>5</span>, <span class='fl'>20</span>, <span class='kw'>replace</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)) + <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/sample'>sample</a></span>(<span class='fl'>86400</span>, <span class='fl'>20</span>)
<span class='no'>onset_with_errors</span> <span class='kw'>&lt;-</span> <span class='no'>onsets2</span>
<span class='no'>onset_with_errors</span>[<span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/c'>c</a></span>(<span class='fl'>1</span>,<span class='fl'>20</span>)] <span class='kw'>&lt;-</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/c'>c</a></span>(<span class='st'>"male"</span>, <span class='st'>"confirmed"</span>)
<span class='no'>mixed_info</span> <span class='kw'>&lt;-</span> <span class='no'>onsets3</span>
<span class='no'>mixed_info</span>[<span class='fl'>1</span>:<span class='fl'>10</span>] <span class='kw'>&lt;-</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/sample'>sample</a></span>(<span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/c'>c</a></span>(<span class='st'>"bleeding"</span>, <span class='st'>"fever"</span>), <span class='fl'>10</span>, <span class='kw'>replace</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)
<span class='no'>gender</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/sample'>sample</a></span>(<span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/c'>c</a></span>(<span class='st'>"male"</span>, <span class='st'>"female"</span>), <span class='fl'>20</span>, <span class='kw'>replace</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)
<span class='no'>case_type</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/c'>c</a></span>(<span class='st'>"confirmed"</span>, <span class='st'>"probable"</span>, <span class='st'>"suspected"</span>, <span class='st'>"not a case"</span>)
<span class='no'>case</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/sample'>sample</a></span>(<span class='no'>case_type</span>, <span class='fl'>20</span>, <span class='kw'>replace</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)
<span class='no'>toy_data</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/data.frame'>data.frame</a></span>(<span class='st'>"Date of Onset."</span> <span class='kw'>=</span> <span class='no'>onsets</span>,
                       <span class='st'>"onset 2"</span> <span class='kw'>=</span> <span class='no'>onsets2</span>,
                       <span class='st'>"ONSET 3"</span> <span class='kw'>=</span> <span class='no'>onsets3</span>,
                       <span class='st'>"onset_4"</span> <span class='kw'>=</span> <span class='no'>onset_with_errors</span>,
                       <span class='st'>"date admission"</span> <span class='kw'>=</span> <span class='no'>admissions</span>,
                       <span class='st'>"DATE.of.DISCHARGE"</span> <span class='kw'>=</span> <span class='no'>discharges</span>,
                       <span class='st'>"GENDER_ "</span> <span class='kw'>=</span> <span class='no'>gender</span>,
                       <span class='st'>"Épi.Case_définition"</span> <span class='kw'>=</span> <span class='no'>case</span>,
                       <span class='st'>"date of admission"</span> <span class='kw'>=</span> <span class='no'>admissions</span>,
                       <span class='st'>"Date-of_discharge"</span> <span class='kw'>=</span> <span class='no'>discharges</span>,
                       <span class='st'>"extra"</span> <span class='kw'>=</span> <span class='no'>mixed_info</span>,
                       <span class='kw'>stringsAsFactors</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>,
                       <span class='kw'>check.names</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>)
<span class='co'>## show data</span>
<span class='no'>toy_data</span></div><div class='output co'>#&gt;    Date of Onset.    onset 2    ONSET 3    onset_4      date admission
#&gt; 1      2018-01-10 10/01/2018 10 01 2018       male                &lt;NA&gt;
#&gt; 2      2018-01-08 08/01/2018 08 01 2018 08/01/2018                &lt;NA&gt;
#&gt; 3      2018-01-02 02/01/2018 02 01 2018 02/01/2018                &lt;NA&gt;
#&gt; 4      2018-01-04 04/01/2018 04 01 2018 04/01/2018                &lt;NA&gt;
#&gt; 5      2018-01-05 05/01/2018 05 01 2018 05/01/2018                &lt;NA&gt;
#&gt; 6      2018-01-07 07/01/2018 07 01 2018 07/01/2018 2018-01-08 18:20:09
#&gt; 7      2018-01-04 04/01/2018 04 01 2018 04/01/2018 2018-01-05 09:34:39
#&gt; 8      2018-01-04 04/01/2018 04 01 2018 04/01/2018 2018-01-05 20:40:49
#&gt; 9      2018-01-04 04/01/2018 04 01 2018 04/01/2018 2018-01-05 04:47:37
#&gt; 10     2018-01-03 03/01/2018 03 01 2018 03/01/2018 2018-01-04 18:33:36
#&gt; 11     2018-01-05 05/01/2018 05 01 2018 05/01/2018 2018-01-06 20:28:07
#&gt; 12     2018-01-06 06/01/2018 06 01 2018 06/01/2018 2018-01-07 14:16:32
#&gt; 13     2018-01-05 05/01/2018 05 01 2018 05/01/2018 2018-01-06 01:51:22
#&gt; 14     2018-01-03 03/01/2018 03 01 2018 03/01/2018 2018-01-04 12:51:18
#&gt; 15     2018-01-04 04/01/2018 04 01 2018 04/01/2018 2018-01-05 09:38:50
#&gt; 16     2018-01-09 09/01/2018 09 01 2018 09/01/2018 2018-01-10 12:57:26
#&gt; 17     2018-01-05 05/01/2018 05 01 2018 05/01/2018 2018-01-06 19:32:14
#&gt; 18     2018-01-06 06/01/2018 06 01 2018 06/01/2018 2018-01-07 15:02:59
#&gt; 19     2018-01-07 07/01/2018 07 01 2018 07/01/2018 2018-01-08 02:53:43
#&gt; 20     2018-01-07 07/01/2018 07 01 2018  confirmed 2018-01-08 11:31:40
#&gt;      DATE.of.DISCHARGE GENDER_  Épi.Case_définition   date of admission
#&gt; 1                 &lt;NA&gt;     male            probable                &lt;NA&gt;
#&gt; 2                 &lt;NA&gt;     male            probable                &lt;NA&gt;
#&gt; 3                 &lt;NA&gt;   female           suspected                &lt;NA&gt;
#&gt; 4                 &lt;NA&gt;   female           suspected                &lt;NA&gt;
#&gt; 5                 &lt;NA&gt;   female          not a case                &lt;NA&gt;
#&gt; 6  2018-01-14 16:57:18   female           suspected 2018-01-08 18:20:09
#&gt; 7  2018-01-08 05:01:34     male           confirmed 2018-01-05 09:34:39
#&gt; 8  2018-01-08 09:42:15   female          not a case 2018-01-05 20:40:49
#&gt; 9  2018-01-07 07:13:17     male          not a case 2018-01-05 04:47:37
#&gt; 10 2018-01-06 10:50:14     male           confirmed 2018-01-04 18:33:36
#&gt; 11 2018-01-08 19:21:05     male           confirmed 2018-01-06 20:28:07
#&gt; 12 2018-01-08 16:07:12     male          not a case 2018-01-07 14:16:32
#&gt; 13 2018-01-07 13:45:23     male           suspected 2018-01-06 01:51:22
#&gt; 14 2018-01-08 13:20:23   female           confirmed 2018-01-04 12:51:18
#&gt; 15 2018-01-07 01:11:50     male            probable 2018-01-05 09:38:50
#&gt; 16 2018-01-12 10:54:32   female           confirmed 2018-01-10 12:57:26
#&gt; 17 2018-01-09 00:18:16   female           confirmed 2018-01-06 19:32:14
#&gt; 18 2018-01-10 23:02:40     male          not a case 2018-01-07 15:02:59
#&gt; 19 2018-01-09 04:19:17   female          not a case 2018-01-08 02:53:43
#&gt; 20 2018-01-13 00:47:03   female            probable 2018-01-08 11:31:40
#&gt;      Date-of_discharge      extra
#&gt; 1                 &lt;NA&gt;      fever
#&gt; 2                 &lt;NA&gt;   bleeding
#&gt; 3                 &lt;NA&gt;      fever
#&gt; 4                 &lt;NA&gt;   bleeding
#&gt; 5                 &lt;NA&gt;   bleeding
#&gt; 6  2018-01-14 16:57:18      fever
#&gt; 7  2018-01-08 05:01:34   bleeding
#&gt; 8  2018-01-08 09:42:15   bleeding
#&gt; 9  2018-01-07 07:13:17      fever
#&gt; 10 2018-01-06 10:50:14      fever
#&gt; 11 2018-01-08 19:21:05 05 01 2018
#&gt; 12 2018-01-08 16:07:12 06 01 2018
#&gt; 13 2018-01-07 13:45:23 05 01 2018
#&gt; 14 2018-01-08 13:20:23 03 01 2018
#&gt; 15 2018-01-07 01:11:50 04 01 2018
#&gt; 16 2018-01-12 10:54:32 09 01 2018
#&gt; 17 2018-01-09 00:18:16 05 01 2018
#&gt; 18 2018-01-10 23:02:40 06 01 2018
#&gt; 19 2018-01-09 04:19:17 07 01 2018
#&gt; 20 2018-01-13 00:47:03 07 01 2018</div><div class='input'><span class='fu'><a href='https://www.rdocumentation.org/packages/utils/topics/str'>str</a></span>(<span class='no'>toy_data</span>)</div><div class='output co'>#&gt; 'data.frame':	20 obs. of  11 variables:
#&gt;  $ Date of Onset.     : POSIXct, format: "2018-01-10" "2018-01-08" ...
#&gt;  $ onset 2            : chr  "10/01/2018" "08/01/2018" "02/01/2018" "04/01/2018" ...
#&gt;  $ ONSET 3            : chr  "10 01 2018" "08 01 2018" "02 01 2018" "04 01 2018" ...
#&gt;  $ onset_4            : chr  "male" "08/01/2018" "02/01/2018" "04/01/2018" ...
#&gt;  $ date admission     : POSIXct, format: NA NA ...
#&gt;  $ DATE.of.DISCHARGE  : POSIXct, format: NA NA ...
#&gt;  $ GENDER_            : chr  "male" "male" "female" "female" ...
#&gt;  $ Épi.Case_définition: chr  "probable" "probable" "suspected" "suspected" ...
#&gt;  $ date of admission  : POSIXct, format: NA NA ...
#&gt;  $ Date-of_discharge  : POSIXct, format: NA NA ...
#&gt;  $ extra              : chr  "fever" "bleeding" "fever" "bleeding" ...</div><div class='input'>
<span class='co'>## clean variable names, store in new object, show results</span>
<span class='no'>clean_data</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='clean_variable_names.html'>clean_variable_names</a></span>(<span class='no'>toy_data</span>)
<span class='no'>clean_data1</span> <span class='kw'>&lt;-</span> <span class='fu'>clean_dates</span>(<span class='no'>clean_data</span>, <span class='kw'>first_date</span> <span class='kw'>=</span> <span class='st'>"2018-01-01"</span>)
<span class='no'>clean_data1</span></div><div class='output co'>#&gt;    date_of_onset    onset_2    onset_3    onset_4 date_admission
#&gt; 1     2018-01-10 2018-01-10 2018-01-10       &lt;NA&gt;           &lt;NA&gt;
#&gt; 2     2018-01-08 2018-01-08 2018-01-08 2018-01-08           &lt;NA&gt;
#&gt; 3     2018-01-02 2018-01-02 2018-01-02 2018-01-02           &lt;NA&gt;
#&gt; 4     2018-01-04 2018-01-04 2018-01-04 2018-01-04           &lt;NA&gt;
#&gt; 5     2018-01-05 2018-01-05 2018-01-05 2018-01-05           &lt;NA&gt;
#&gt; 6     2018-01-07 2018-01-07 2018-01-07 2018-01-07     2018-01-08
#&gt; 7     2018-01-04 2018-01-04 2018-01-04 2018-01-04     2018-01-05
#&gt; 8     2018-01-04 2018-01-04 2018-01-04 2018-01-04     2018-01-05
#&gt; 9     2018-01-04 2018-01-04 2018-01-04 2018-01-04     2018-01-05
#&gt; 10    2018-01-03 2018-01-03 2018-01-03 2018-01-03     2018-01-04
#&gt; 11    2018-01-05 2018-01-05 2018-01-05 2018-01-05     2018-01-06
#&gt; 12    2018-01-06 2018-01-06 2018-01-06 2018-01-06     2018-01-07
#&gt; 13    2018-01-05 2018-01-05 2018-01-05 2018-01-05     2018-01-06
#&gt; 14    2018-01-03 2018-01-03 2018-01-03 2018-01-03     2018-01-04
#&gt; 15    2018-01-04 2018-01-04 2018-01-04 2018-01-04     2018-01-05
#&gt; 16    2018-01-09 2018-01-09 2018-01-09 2018-01-09     2018-01-10
#&gt; 17    2018-01-05 2018-01-05 2018-01-05 2018-01-05     2018-01-06
#&gt; 18    2018-01-06 2018-01-06 2018-01-06 2018-01-06     2018-01-07
#&gt; 19    2018-01-07 2018-01-07 2018-01-07 2018-01-07     2018-01-08
#&gt; 20    2018-01-07 2018-01-07 2018-01-07       &lt;NA&gt;     2018-01-08
#&gt;    date_of_discharge gender epi_case_definition date_of_admission
#&gt; 1               &lt;NA&gt;   male            probable              &lt;NA&gt;
#&gt; 2               &lt;NA&gt;   male            probable              &lt;NA&gt;
#&gt; 3               &lt;NA&gt; female           suspected              &lt;NA&gt;
#&gt; 4               &lt;NA&gt; female           suspected              &lt;NA&gt;
#&gt; 5               &lt;NA&gt; female          not a case              &lt;NA&gt;
#&gt; 6         2018-01-14 female           suspected        2018-01-08
#&gt; 7         2018-01-08   male           confirmed        2018-01-05
#&gt; 8         2018-01-08 female          not a case        2018-01-05
#&gt; 9         2018-01-07   male          not a case        2018-01-05
#&gt; 10        2018-01-06   male           confirmed        2018-01-04
#&gt; 11        2018-01-08   male           confirmed        2018-01-06
#&gt; 12        2018-01-08   male          not a case        2018-01-07
#&gt; 13        2018-01-07   male           suspected        2018-01-06
#&gt; 14        2018-01-08 female           confirmed        2018-01-04
#&gt; 15        2018-01-07   male            probable        2018-01-05
#&gt; 16        2018-01-12 female           confirmed        2018-01-10
#&gt; 17        2018-01-09 female           confirmed        2018-01-06
#&gt; 18        2018-01-10   male          not a case        2018-01-07
#&gt; 19        2018-01-09 female          not a case        2018-01-08
#&gt; 20        2018-01-13 female            probable        2018-01-08
#&gt;    date_of_discharge      extra
#&gt; 1               &lt;NA&gt;       &lt;NA&gt;
#&gt; 2               &lt;NA&gt;       &lt;NA&gt;
#&gt; 3               &lt;NA&gt;       &lt;NA&gt;
#&gt; 4               &lt;NA&gt;       &lt;NA&gt;
#&gt; 5               &lt;NA&gt;       &lt;NA&gt;
#&gt; 6         2018-01-14       &lt;NA&gt;
#&gt; 7         2018-01-08       &lt;NA&gt;
#&gt; 8         2018-01-08       &lt;NA&gt;
#&gt; 9         2018-01-07       &lt;NA&gt;
#&gt; 10        2018-01-06       &lt;NA&gt;
#&gt; 11        2018-01-08 2018-01-05
#&gt; 12        2018-01-08 2018-01-06
#&gt; 13        2018-01-07 2018-01-05
#&gt; 14        2018-01-08 2018-01-03
#&gt; 15        2018-01-07 2018-01-04
#&gt; 16        2018-01-12 2018-01-09
#&gt; 17        2018-01-09 2018-01-05
#&gt; 18        2018-01-10 2018-01-06
#&gt; 19        2018-01-09 2018-01-07
#&gt; 20        2018-01-13 2018-01-07</div><div class='input'>
<span class='co'>## Only clean the columns that have the words "date" or "admission" in them</span>
<span class='no'>the_date_cols</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/grep'>grep</a></span>(<span class='st'>"(date|admission)"</span>, <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/names'>names</a></span>(<span class='no'>clean_data</span>))
<span class='no'>the_date_cols</span></div><div class='output co'>#&gt; [1]  1  5  6  9 10</div><div class='input'><span class='no'>clean_data2</span> <span class='kw'>&lt;-</span> <span class='fu'>clean_dates</span>(<span class='no'>clean_data</span>,
                           <span class='kw'>first_date</span>  <span class='kw'>=</span> <span class='st'>"2018-01-01"</span>,
                           <span class='kw'>force_Date</span>  <span class='kw'>=</span> <span class='no'>the_date_cols</span>,
                           <span class='kw'>guess_dates</span> <span class='kw'>=</span> <span class='no'>the_date_cols</span>)
<span class='no'>clean_data2</span></div><div class='output co'>#&gt;    date_of_onset    onset_2    onset_3    onset_4 date_admission
#&gt; 1     2018-01-10 10/01/2018 10 01 2018       male           &lt;NA&gt;
#&gt; 2     2018-01-08 08/01/2018 08 01 2018 08/01/2018           &lt;NA&gt;
#&gt; 3     2018-01-02 02/01/2018 02 01 2018 02/01/2018           &lt;NA&gt;
#&gt; 4     2018-01-04 04/01/2018 04 01 2018 04/01/2018           &lt;NA&gt;
#&gt; 5     2018-01-05 05/01/2018 05 01 2018 05/01/2018           &lt;NA&gt;
#&gt; 6     2018-01-07 07/01/2018 07 01 2018 07/01/2018     2018-01-08
#&gt; 7     2018-01-04 04/01/2018 04 01 2018 04/01/2018     2018-01-05
#&gt; 8     2018-01-04 04/01/2018 04 01 2018 04/01/2018     2018-01-05
#&gt; 9     2018-01-04 04/01/2018 04 01 2018 04/01/2018     2018-01-05
#&gt; 10    2018-01-03 03/01/2018 03 01 2018 03/01/2018     2018-01-04
#&gt; 11    2018-01-05 05/01/2018 05 01 2018 05/01/2018     2018-01-06
#&gt; 12    2018-01-06 06/01/2018 06 01 2018 06/01/2018     2018-01-07
#&gt; 13    2018-01-05 05/01/2018 05 01 2018 05/01/2018     2018-01-06
#&gt; 14    2018-01-03 03/01/2018 03 01 2018 03/01/2018     2018-01-04
#&gt; 15    2018-01-04 04/01/2018 04 01 2018 04/01/2018     2018-01-05
#&gt; 16    2018-01-09 09/01/2018 09 01 2018 09/01/2018     2018-01-10
#&gt; 17    2018-01-05 05/01/2018 05 01 2018 05/01/2018     2018-01-06
#&gt; 18    2018-01-06 06/01/2018 06 01 2018 06/01/2018     2018-01-07
#&gt; 19    2018-01-07 07/01/2018 07 01 2018 07/01/2018     2018-01-08
#&gt; 20    2018-01-07 07/01/2018 07 01 2018  confirmed     2018-01-08
#&gt;    date_of_discharge gender epi_case_definition date_of_admission
#&gt; 1               &lt;NA&gt;   male            probable              &lt;NA&gt;
#&gt; 2               &lt;NA&gt;   male            probable              &lt;NA&gt;
#&gt; 3               &lt;NA&gt; female           suspected              &lt;NA&gt;
#&gt; 4               &lt;NA&gt; female           suspected              &lt;NA&gt;
#&gt; 5               &lt;NA&gt; female          not a case              &lt;NA&gt;
#&gt; 6         2018-01-14 female           suspected        2018-01-08
#&gt; 7         2018-01-08   male           confirmed        2018-01-05
#&gt; 8         2018-01-08 female          not a case        2018-01-05
#&gt; 9         2018-01-07   male          not a case        2018-01-05
#&gt; 10        2018-01-06   male           confirmed        2018-01-04
#&gt; 11        2018-01-08   male           confirmed        2018-01-06
#&gt; 12        2018-01-08   male          not a case        2018-01-07
#&gt; 13        2018-01-07   male           suspected        2018-01-06
#&gt; 14        2018-01-08 female           confirmed        2018-01-04
#&gt; 15        2018-01-07   male            probable        2018-01-05
#&gt; 16        2018-01-12 female           confirmed        2018-01-10
#&gt; 17        2018-01-09 female           confirmed        2018-01-06
#&gt; 18        2018-01-10   male          not a case        2018-01-07
#&gt; 19        2018-01-09 female          not a case        2018-01-08
#&gt; 20        2018-01-13 female            probable        2018-01-08
#&gt;    date_of_discharge      extra
#&gt; 1               &lt;NA&gt;      fever
#&gt; 2               &lt;NA&gt;   bleeding
#&gt; 3               &lt;NA&gt;      fever
#&gt; 4               &lt;NA&gt;   bleeding
#&gt; 5               &lt;NA&gt;   bleeding
#&gt; 6         2018-01-14      fever
#&gt; 7         2018-01-08   bleeding
#&gt; 8         2018-01-08   bleeding
#&gt; 9         2018-01-07      fever
#&gt; 10        2018-01-06      fever
#&gt; 11        2018-01-08 05 01 2018
#&gt; 12        2018-01-08 06 01 2018
#&gt; 13        2018-01-07 05 01 2018
#&gt; 14        2018-01-08 03 01 2018
#&gt; 15        2018-01-07 04 01 2018
#&gt; 16        2018-01-12 09 01 2018
#&gt; 17        2018-01-09 05 01 2018
#&gt; 18        2018-01-10 06 01 2018
#&gt; 19        2018-01-09 07 01 2018
#&gt; 20        2018-01-13 07 01 2018</div><div class='input'><span class='fu'><a href='https://www.rdocumentation.org/packages/utils/topics/str'>str</a></span>(<span class='no'>clean_data2</span>)</div><div class='output co'>#&gt; 'data.frame':	20 obs. of  11 variables:
#&gt;  $ date_of_onset      : Date, format: "2018-01-10" "2018-01-08" ...
#&gt;  $ onset_2            : chr  "10/01/2018" "08/01/2018" "02/01/2018" "04/01/2018" ...
#&gt;  $ onset_3            : chr  "10 01 2018" "08 01 2018" "02 01 2018" "04 01 2018" ...
#&gt;  $ onset_4            : chr  "male" "08/01/2018" "02/01/2018" "04/01/2018" ...
#&gt;  $ date_admission     : Date, format: NA NA ...
#&gt;  $ date_of_discharge  : Date, format: NA NA ...
#&gt;  $ gender             : chr  "male" "male" "female" "female" ...
#&gt;  $ epi_case_definition: chr  "probable" "probable" "suspected" "suspected" ...
#&gt;  $ date_of_admission  : Date, format: NA NA ...
#&gt;  $ date_of_discharge  : Date, format: NA NA ...
#&gt;  $ extra              : chr  "fever" "bleeding" "fever" "bleeding" ...
#&gt;  - attr(*, "comment")= Named chr  "Date of Onset." "onset 2" "ONSET 3" "onset_4" ...
#&gt;   ..- attr(*, "names")= chr  "date_of_onset" "onset_2" "onset_3" "onset_4" ...</div><div class='input'>
<span class='co'>## A more complex example: clean date and admissions, but avoid the discharge</span>
<span class='co'>## column, since the timestamp is important</span>
<span class='no'>the_date_cols</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/grep'>grepl</a></span>(<span class='st'>"(date|admission)"</span>, <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/names'>names</a></span>(<span class='no'>clean_data</span>))
<span class='no'>discharge</span>     <span class='kw'>&lt;-</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/grep'>grepl</a></span>(<span class='st'>"discharge"</span>, <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/names'>names</a></span>(<span class='no'>clean_data</span>))

<span class='co'>## set names so that these are easier to track</span>
<span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/names'>names</a></span>(<span class='no'>the_date_cols</span>) <span class='kw'>&lt;-</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/names'>names</a></span>(<span class='no'>clean_data</span>) <span class='kw'>-&gt;</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/names'>names</a></span>(<span class='no'>discharge</span>)

<span class='no'>the_date_cols</span> <span class='co'># columns we want</span></div><div class='output co'>#&gt;       date_of_onset             onset_2             onset_3             onset_4 
#&gt;                TRUE               FALSE               FALSE               FALSE 
#&gt;      date_admission   date_of_discharge              gender epi_case_definition 
#&gt;                TRUE                TRUE               FALSE               FALSE 
#&gt;   date_of_admission   date_of_discharge               extra 
#&gt;                TRUE                TRUE               FALSE </div><div class='input'>!<span class='no'>discharge</span>    <span class='co'># columns that are not the discharge columns ("!" means "not")</span></div><div class='output co'>#&gt;       date_of_onset             onset_2             onset_3             onset_4 
#&gt;                TRUE                TRUE                TRUE                TRUE 
#&gt;      date_admission   date_of_discharge              gender epi_case_definition 
#&gt;                TRUE               FALSE                TRUE                TRUE 
#&gt;   date_of_admission   date_of_discharge               extra 
#&gt;                TRUE               FALSE                TRUE </div><div class='input'><span class='no'>to_keep</span>     <span class='kw'>&lt;-</span> <span class='no'>the_date_cols</span> <span class='kw'>&amp;</span> !<span class='no'>discharge</span> <span class='co'># removing the discharge column</span>
<span class='no'>clean_data3</span> <span class='kw'>&lt;-</span> <span class='fu'>clean_dates</span>(<span class='no'>clean_data</span>,
                           <span class='kw'>first_date</span>  <span class='kw'>=</span> <span class='st'>"2018-01-01"</span>,
                           <span class='kw'>force_Date</span>  <span class='kw'>=</span> <span class='no'>to_keep</span>,
                           <span class='kw'>guess_dates</span> <span class='kw'>=</span> <span class='no'>to_keep</span>)
<span class='no'>clean_data3</span></div><div class='output co'>#&gt;    date_of_onset    onset_2    onset_3    onset_4 date_admission
#&gt; 1     2018-01-10 10/01/2018 10 01 2018       male           &lt;NA&gt;
#&gt; 2     2018-01-08 08/01/2018 08 01 2018 08/01/2018           &lt;NA&gt;
#&gt; 3     2018-01-02 02/01/2018 02 01 2018 02/01/2018           &lt;NA&gt;
#&gt; 4     2018-01-04 04/01/2018 04 01 2018 04/01/2018           &lt;NA&gt;
#&gt; 5     2018-01-05 05/01/2018 05 01 2018 05/01/2018           &lt;NA&gt;
#&gt; 6     2018-01-07 07/01/2018 07 01 2018 07/01/2018     2018-01-08
#&gt; 7     2018-01-04 04/01/2018 04 01 2018 04/01/2018     2018-01-05
#&gt; 8     2018-01-04 04/01/2018 04 01 2018 04/01/2018     2018-01-05
#&gt; 9     2018-01-04 04/01/2018 04 01 2018 04/01/2018     2018-01-05
#&gt; 10    2018-01-03 03/01/2018 03 01 2018 03/01/2018     2018-01-04
#&gt; 11    2018-01-05 05/01/2018 05 01 2018 05/01/2018     2018-01-06
#&gt; 12    2018-01-06 06/01/2018 06 01 2018 06/01/2018     2018-01-07
#&gt; 13    2018-01-05 05/01/2018 05 01 2018 05/01/2018     2018-01-06
#&gt; 14    2018-01-03 03/01/2018 03 01 2018 03/01/2018     2018-01-04
#&gt; 15    2018-01-04 04/01/2018 04 01 2018 04/01/2018     2018-01-05
#&gt; 16    2018-01-09 09/01/2018 09 01 2018 09/01/2018     2018-01-10
#&gt; 17    2018-01-05 05/01/2018 05 01 2018 05/01/2018     2018-01-06
#&gt; 18    2018-01-06 06/01/2018 06 01 2018 06/01/2018     2018-01-07
#&gt; 19    2018-01-07 07/01/2018 07 01 2018 07/01/2018     2018-01-08
#&gt; 20    2018-01-07 07/01/2018 07 01 2018  confirmed     2018-01-08
#&gt;      date_of_discharge gender epi_case_definition date_of_admission
#&gt; 1                 &lt;NA&gt;   male            probable              &lt;NA&gt;
#&gt; 2                 &lt;NA&gt;   male            probable              &lt;NA&gt;
#&gt; 3                 &lt;NA&gt; female           suspected              &lt;NA&gt;
#&gt; 4                 &lt;NA&gt; female           suspected              &lt;NA&gt;
#&gt; 5                 &lt;NA&gt; female          not a case              &lt;NA&gt;
#&gt; 6  2018-01-14 16:57:18 female           suspected        2018-01-08
#&gt; 7  2018-01-08 05:01:34   male           confirmed        2018-01-05
#&gt; 8  2018-01-08 09:42:15 female          not a case        2018-01-05
#&gt; 9  2018-01-07 07:13:17   male          not a case        2018-01-05
#&gt; 10 2018-01-06 10:50:14   male           confirmed        2018-01-04
#&gt; 11 2018-01-08 19:21:05   male           confirmed        2018-01-06
#&gt; 12 2018-01-08 16:07:12   male          not a case        2018-01-07
#&gt; 13 2018-01-07 13:45:23   male           suspected        2018-01-06
#&gt; 14 2018-01-08 13:20:23 female           confirmed        2018-01-04
#&gt; 15 2018-01-07 01:11:50   male            probable        2018-01-05
#&gt; 16 2018-01-12 10:54:32 female           confirmed        2018-01-10
#&gt; 17 2018-01-09 00:18:16 female           confirmed        2018-01-06
#&gt; 18 2018-01-10 23:02:40   male          not a case        2018-01-07
#&gt; 19 2018-01-09 04:19:17 female          not a case        2018-01-08
#&gt; 20 2018-01-13 00:47:03 female            probable        2018-01-08
#&gt;      date_of_discharge      extra
#&gt; 1                 &lt;NA&gt;      fever
#&gt; 2                 &lt;NA&gt;   bleeding
#&gt; 3                 &lt;NA&gt;      fever
#&gt; 4                 &lt;NA&gt;   bleeding
#&gt; 5                 &lt;NA&gt;   bleeding
#&gt; 6  2018-01-14 16:57:18      fever
#&gt; 7  2018-01-08 05:01:34   bleeding
#&gt; 8  2018-01-08 09:42:15   bleeding
#&gt; 9  2018-01-07 07:13:17      fever
#&gt; 10 2018-01-06 10:50:14      fever
#&gt; 11 2018-01-08 19:21:05 05 01 2018
#&gt; 12 2018-01-08 16:07:12 06 01 2018
#&gt; 13 2018-01-07 13:45:23 05 01 2018
#&gt; 14 2018-01-08 13:20:23 03 01 2018
#&gt; 15 2018-01-07 01:11:50 04 01 2018
#&gt; 16 2018-01-12 10:54:32 09 01 2018
#&gt; 17 2018-01-09 00:18:16 05 01 2018
#&gt; 18 2018-01-10 23:02:40 06 01 2018
#&gt; 19 2018-01-09 04:19:17 07 01 2018
#&gt; 20 2018-01-13 00:47:03 07 01 2018</div><div class='input'><span class='fu'><a href='https://www.rdocumentation.org/packages/utils/topics/str'>str</a></span>(<span class='no'>clean_data3</span>)</div><div class='output co'>#&gt; 'data.frame':	20 obs. of  11 variables:
#&gt;  $ date_of_onset      : Date, format: "2018-01-10" "2018-01-08" ...
#&gt;  $ onset_2            : chr  "10/01/2018" "08/01/2018" "02/01/2018" "04/01/2018" ...
#&gt;  $ onset_3            : chr  "10 01 2018" "08 01 2018" "02 01 2018" "04 01 2018" ...
#&gt;  $ onset_4            : chr  "male" "08/01/2018" "02/01/2018" "04/01/2018" ...
#&gt;  $ date_admission     : Date, format: NA NA ...
#&gt;  $ date_of_discharge  : POSIXct, format: NA NA ...
#&gt;  $ gender             : chr  "male" "male" "female" "female" ...
#&gt;  $ epi_case_definition: chr  "probable" "probable" "suspected" "suspected" ...
#&gt;  $ date_of_admission  : Date, format: NA NA ...
#&gt;  $ date_of_discharge  : POSIXct, format: NA NA ...
#&gt;  $ extra              : chr  "fever" "bleeding" "fever" "bleeding" ...
#&gt;  - attr(*, "comment")= Named chr  "Date of Onset." "onset 2" "ONSET 3" "onset_4" ...
#&gt;   ..- attr(*, "names")= chr  "date_of_onset" "onset_2" "onset_3" "onset_4" ...</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#value">Value</a></li>

      <li><a href="#see-also">See also</a></li>
      
      <li><a href="#examples">Examples</a></li>
    </ul>

    <h2>Author</h2>
    <p>Thibaut Jombart, Zhian N. Kamvar</p>
  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by Thibaut Jombart, Zhian N. Kamvar.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.3.0.</p>
</div>
      </footer>
   </div>

  

  </body>
</html>


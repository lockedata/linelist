<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>linelist: package overview â€¢ linelist</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="linelist: package overview">
<meta property="og:description" content="">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">linelist</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.0.29.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/overview.html">linelist: package overview</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/reconhub/linelist">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>linelist: package overview</h1>
            
            <h4 class="date">2019-03-25</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/reconhub/linelist/blob/master/vignettes/overview.Rmd"><code>vignettes/overview.Rmd</code></a></small>
      <div class="hidden name"><code>overview.Rmd</code></div>

    </div>

    
    
<p><em>linelist</em> provides a framework for sensible data standardisation for tabular linelist data commonly used in outbreak analysis. This includes functionality for guessing dates, cleaning non-standard variable names, and defining a data dictionary.</p>
<div id="installing-the-package" class="section level1">
<h1 class="hasAnchor">
<a href="#installing-the-package" class="anchor"></a>Installing the package</h1>
<p>To install the current stable, CRAN version of the package, type:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" data-line-number="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/install.packages">install.packages</a></span>(<span class="st">"linelist"</span>)</a></code></pre></div>
<p>To benefit from the latest features and bug fixes, install the development, <em>github</em> version of the package using:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" data-line-number="1">devtools<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/devtools/topics/reexports">install_github</a></span>(<span class="st">"reconhub/linelist"</span>)</a></code></pre></div>
<p>Note that this requires the package <em>devtools</em> installed.</p>
</div>
<div id="main-visible-functions-of-the-package" class="section level1">
<h1 class="hasAnchor">
<a href="#main-visible-functions-of-the-package" class="anchor"></a>Main visible functions of the package</h1>
<p>The main functions of the package include:</p>
<ul>
<li>
<code><a href="../reference/clean_data.html">clean_data()</a></code> will standardise variable names by removing spaces and extra punctuation, attempt to parse dates with a given tolerance, and convert all characters to the closest ASCII approximation</li>
<li>
<code><a href="../reference/as_linelist.html">as_linelist()</a></code> will convert a data frame to a linelist object, allowing the user to define a data dictionary.</li>
<li>
<code><a href="../reference/dictionary.html">set_dictionary()</a></code> defines valid variables to be used in the data dictionary</li>
<li>
<code><a href="../reference/dictionary.html">get_dictionary()</a></code> accesses valid variables to be used in the data dictionary</li>
<li>
<code><a href="../reference/accessors.html">get_epivars()</a></code> accesses a variable from the linelist</li>
<li>
<code><a href="../reference/set_epivars.html">set_epivars()</a></code> adds new dictionary definitions to the linelist</li>
</ul>
<p>The linelist data class allows you to define variables that are important to your analysis that make it easy to create situation report templates no matter what the data class is.</p>
<p>As an example, we can use data from the <a href="https://cran.r-project.org/package=outbreaks">outbreaks package</a>.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" data-line-number="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(<span class="st">'outbreaks'</span>)</a>
<a class="sourceLine" id="cb3-2" data-line-number="2"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(<span class="st">'incidence'</span>)</a>
<a class="sourceLine" id="cb3-3" data-line-number="3"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(<span class="st">'linelist'</span>)</a>
<a class="sourceLine" id="cb3-4" data-line-number="4"></a>
<a class="sourceLine" id="cb3-5" data-line-number="5"><span class="co"># define the data dictionary</span></a>
<a class="sourceLine" id="cb3-6" data-line-number="6"></a>
<a class="sourceLine" id="cb3-7" data-line-number="7"><span class="kw"><a href="../reference/dictionary.html">set_dictionary</a></span>(<span class="kw"><a href="../reference/dictionary.html">default_dictionary</a></span>())</a>
<a class="sourceLine" id="cb3-8" data-line-number="8"><span class="kw"><a href="../reference/dictionary.html">get_dictionary</a></span>()</a></code></pre></div>
<pre><code>##             epivar              hxl
## 1               id       #respondee
## 2       date_onset     #date +start
## 3      date_report  #date +reported
## 4     date_outcome       #date +end
## 5  case_definition #indicator +name
## 6          outcome #indicator +type
## 7           gender #indicator +type
## 8              age  #indicator +num
## 9        age_group #indicator +type
## 10         geo_lon        #geo +lon
## 11         geo_lat        #geo +lat
##                                            description
## 1                         unique individual identifier
## 2                       date at which symptoms started
## 3                      date at which case was reported
## 4              date of the outcome (recovery or death)
## 5  case type: suspected, probable, confirmed, negative
## 6                                    recovery or death
## 7                             gender of the individual
## 8                       age of the individual in years
## 9                 age group of the individual in years
## 10                    geographic coordinate: longitude
## 11                     geographic coordinate: latitude</code></pre>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" data-line-number="1"><span class="co"># generate a template linelist with `template_linelist()`</span></a>
<a class="sourceLine" id="cb5-2" data-line-number="2"><span class="kw"><a href="../reference/template_linelist.html">template_linelist</a></span>(outbreaks<span class="op">::</span>fluH7N9_china_<span class="dv">2013</span>)</a></code></pre></div>
<pre><code>## ll &lt;- as_linelist(x = outbreaks::fluH7N9_china_2013,
##   id              =    ,
##   date_onset      =    ,
##   date_report     =    ,
##   date_outcome    =    ,
##   case_definition =    ,
##   outcome         =    ,
##   gender          =    ,
##   age             =    ,
##   age_group       =    ,
##   geo_lon         =    ,
##   geo_lat         =    ,
##   NULL  # don't delete me
## )</code></pre>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" data-line-number="1"><span class="co"># convert the data set to a linelist and define the variables</span></a>
<a class="sourceLine" id="cb7-2" data-line-number="2">ll &lt;-<span class="st"> </span><span class="kw"><a href="../reference/as_linelist.html">as_linelist</a></span>(outbreaks<span class="op">::</span>fluH7N9_china_<span class="dv">2013</span>,</a>
<a class="sourceLine" id="cb7-3" data-line-number="3">  <span class="dt">outcome      =</span> <span class="st">"outcome"</span>, </a>
<a class="sourceLine" id="cb7-4" data-line-number="4">  <span class="dt">date_outcome =</span> <span class="st">"date_of_outcome"</span>, </a>
<a class="sourceLine" id="cb7-5" data-line-number="5">  <span class="dt">id           =</span> <span class="st">"case_id"</span>,</a>
<a class="sourceLine" id="cb7-6" data-line-number="6">  <span class="dt">date_onset   =</span> <span class="st">"date_of_onset"</span>,</a>
<a class="sourceLine" id="cb7-7" data-line-number="7">  <span class="dt">gender       =</span> <span class="st">"gender"</span>,</a>
<a class="sourceLine" id="cb7-8" data-line-number="8">  <span class="dt">age          =</span> <span class="st">"age"</span>,</a>
<a class="sourceLine" id="cb7-9" data-line-number="9">  <span class="ot">NULL</span>  <span class="co"># don't delete me</span></a>
<a class="sourceLine" id="cb7-10" data-line-number="10">)</a></code></pre></div>
<p>The resulting linelist object acts the same as a data frame in every way, but it contains a data dictionary in the metadata:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb8-1" data-line-number="1"><span class="co"># These are the same</span></a>
<a class="sourceLine" id="cb8-2" data-line-number="2"><span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/head">head</a></span>(ll)</a></code></pre></div>
<pre><code>## &lt;linelist object&gt;
## 
##   case_id date_of_onset date_of_hospitalisation date_of_outcome outcome
## 1       1    2013-02-19                    &lt;NA&gt;      2013-03-04   Death
## 2       2    2013-02-27              2013-03-03      2013-03-10   Death
## 3       3    2013-03-09              2013-03-19      2013-04-09   Death
## 4       4    2013-03-19              2013-03-27            &lt;NA&gt;    &lt;NA&gt;
## 5       5    2013-03-19              2013-03-30      2013-05-15 Recover
## 6       6    2013-03-21              2013-03-28      2013-04-26   Death
##   gender age province
## 1      m  87 Shanghai
## 2      m  27 Shanghai
## 3      f  35    Anhui
## 4      f  45  Jiangsu
## 5      f  48  Jiangsu
## 6      f  32  Jiangsu</code></pre>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb10-1" data-line-number="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/head">head</a></span>(outbreaks<span class="op">::</span>fluH7N9_china_<span class="dv">2013</span>)</a></code></pre></div>
<pre><code>##   case_id date_of_onset date_of_hospitalisation date_of_outcome outcome
## 1       1    2013-02-19                    &lt;NA&gt;      2013-03-04   Death
## 2       2    2013-02-27              2013-03-03      2013-03-10   Death
## 3       3    2013-03-09              2013-03-19      2013-04-09   Death
## 4       4    2013-03-19              2013-03-27            &lt;NA&gt;    &lt;NA&gt;
## 5       5    2013-03-19              2013-03-30      2013-05-15 Recover
## 6       6    2013-03-21              2013-03-28      2013-04-26   Death
##   gender age province
## 1      m  87 Shanghai
## 2      m  27 Shanghai
## 3      f  35    Anhui
## 4      f  45  Jiangsu
## 5      f  48  Jiangsu
## 6      f  32  Jiangsu</code></pre>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb12-1" data-line-number="1"><span class="kw"><a href="../reference/list_epivars.html">list_epivars</a></span>(ll) <span class="co"># show available epivars</span></a></code></pre></div>
<pre><code>##         epivar          column              hxl
## 1           id         case_id       #respondee
## 2   date_onset   date_of_onset     #date +start
## 3 date_outcome date_of_outcome       #date +end
## 4      outcome         outcome #indicator +type
## 5       gender          gender #indicator +type
## 6          age             age  #indicator +num
##                               description
## 1            unique individual identifier
## 2          date at which symptoms started
## 3 date of the outcome (recovery or death)
## 4                       recovery or death
## 5                gender of the individual
## 6          age of the individual in years</code></pre>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb14-1" data-line-number="1"><span class="kw"><a href="../reference/list_epivars.html">list_epivars</a></span>(ll, <span class="dt">simple =</span> <span class="ot">TRUE</span>) <span class="co"># only names of available epivars</span></a></code></pre></div>
<pre><code>## [1] "id"           "date_onset"   "date_outcome" "outcome"     
## [5] "gender"       "age"</code></pre>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb16-1" data-line-number="1"><span class="kw"><a href="../reference/list_epivars.html">list_epivars</a></span>(ll, <span class="dt">full_dict =</span> <span class="ot">TRUE</span>) <span class="co"># ignore non-epivars columns</span></a></code></pre></div>
<pre><code>##             epivar          column              hxl
## 1               id         case_id       #respondee
## 2       date_onset   date_of_onset     #date +start
## 3     date_outcome date_of_outcome       #date +end
## 4          outcome         outcome #indicator +type
## 5           gender          gender #indicator +type
## 6              age             age  #indicator +num
## 7  case_definition            &lt;NA&gt; #indicator +name
## 8          geo_lon            &lt;NA&gt;        #geo +lon
## 9      date_report            &lt;NA&gt;  #date +reported
## 10       age_group            &lt;NA&gt; #indicator +type
## 11         geo_lat            &lt;NA&gt;        #geo +lat
##                                            description
## 1                         unique individual identifier
## 2                       date at which symptoms started
## 3              date of the outcome (recovery or death)
## 4                                    recovery or death
## 5                             gender of the individual
## 6                       age of the individual in years
## 7  case type: suspected, probable, confirmed, negative
## 8                     geographic coordinate: longitude
## 9                      date at which case was reported
## 10                age group of the individual in years
## 11                     geographic coordinate: latitude</code></pre>
<p>You can use this data dictionary to access variables:</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb18-1" data-line-number="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/head">head</a></span>(<span class="kw"><a href="../reference/accessors.html">gender</a></span>(ll))</a></code></pre></div>
<pre><code>## [1] m m f f f f
## Levels: f m</code></pre>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb20-1" data-line-number="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/head">head</a></span>(<span class="kw"><a href="../reference/accessors.html">get_epivars</a></span>(ll, <span class="st">"outcome"</span>)) <span class="co"># only "outcome"</span></a></code></pre></div>
<pre><code>## [1] Death   Death   Death   &lt;NA&gt;    Recover Death  
## Levels: Death Recover</code></pre>
<p>This becomes useful in generating templates where the columns from the incoming data may not be standardised. For example, if you want to generate an incidence curve for the data stratified by gender, you could write something like this:</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb22-1" data-line-number="1">ic &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/incidence/topics/incidence">incidence</a></span>(<span class="kw"><a href="../reference/accessors.html">date_onset</a></span>(ll), <span class="dt">interval =</span> <span class="st">"week"</span>, <span class="dt">groups =</span> <span class="kw"><a href="../reference/accessors.html">gender</a></span>(ll))</a></code></pre></div>
<pre><code>## 10 missing observations were removed.</code></pre>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb24-1" data-line-number="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/graphics/topics/plot">plot</a></span>(ic)</a></code></pre></div>
<p><img src="overview_files/figure-html/ic_gender-1.png" width="700"></p>
<p>Now, if you had a new data set coming into the template, you are prepared:</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb25-1" data-line-number="1">old_ll &lt;-<span class="st"> </span>ll</a>
<a class="sourceLine" id="cb25-2" data-line-number="2">ll &lt;-<span class="st"> </span><span class="kw"><a href="../reference/as_linelist.html">as_linelist</a></span>(outbreaks<span class="op">::</span>mers_korea_<span class="dv">2015</span><span class="op">$</span>linelist,</a>
<a class="sourceLine" id="cb25-3" data-line-number="3">  <span class="st">"id"</span>         =<span class="st"> "id"</span>,</a>
<a class="sourceLine" id="cb25-4" data-line-number="4">  <span class="st">"age"</span>        =<span class="st"> "age"</span>,</a>
<a class="sourceLine" id="cb25-5" data-line-number="5">  <span class="st">"gender"</span>     =<span class="st"> "sex"</span>,</a>
<a class="sourceLine" id="cb25-6" data-line-number="6">  <span class="st">"date_onset"</span> =<span class="st"> "dt_onset"</span></a>
<a class="sourceLine" id="cb25-7" data-line-number="7">  )</a>
<a class="sourceLine" id="cb25-8" data-line-number="8">ic &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/incidence/topics/incidence">incidence</a></span>(<span class="kw"><a href="../reference/accessors.html">date_onset</a></span>(ll), <span class="dt">interval =</span> <span class="st">"week"</span>, <span class="dt">groups =</span> <span class="kw"><a href="../reference/accessors.html">gender</a></span>(ll))</a></code></pre></div>
<pre><code>## 27 missing observations were removed.</code></pre>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb27-1" data-line-number="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/graphics/topics/plot">plot</a></span>(ic)</a></code></pre></div>
<p><img src="overview_files/figure-html/new_data-1.png" width="700"></p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#installing-the-package">Installing the package</a></li>
      <li><a href="#main-visible-functions-of-the-package">Main visible functions of the package</a></li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by Thibaut Jombart, Zhian N. Kamvar.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.3.0.</p>
</div>
      </footer>
</div>

  

  </body>
</html>
